# TestApp
Rest приложение позволяющее искать объекты с помощью elastic search
## Установка
Для того, чтобы запустить приложение необходимо скопировать проект в локальный репозиторий. Затем необходимо собрать проект.
  Если вы открыли его с помощью intelj idea, то это можно сделать в maven projects нажав на значек maven в правой части экрана в приложении. После нужно пройти по пути TestApp/Lifecycle/install, после нажатия на install проект будет собран.
  Если вы не пользуетесь intelj, тогда необходимо собрать проект любым удобным вам способом, а потом в Dockerfile заменить путь target/TestApp-0.0.1-SNAPSHOT.jar на тот, где находится ваш jar файл.
  COPY <ваш путь до jar-файла> project.jar
Для корректной работы приложения также может понадобится войти в docker desktop. Далее в терминале в директории проекта нужно прописать команду docker-compose up --build и приложение запустится.

## Использование
 - Приложение позволяет осуществлять поиск по атрибутам, вернуть список всех элементов с помощью базы данных и с помощью elastic search, а также сохранять элементы.
 - Примеры возможных запросов:
   - POST: localhost:8080/elastic/save  -  Сохраняет переданный объект Product. В теле метода необходимо передать JSON объекта product. Для проверки можно будет воспользоваться готовывм телом, которое будет чуть ниже.
   - GET: localhost:8080/elastic/get - Возвращает список всех объектов из elastic search.
   - GET: localhost:8080/db/get - Возвращает список всех объектов из базы данных.
   - POST: localhost:8080/elastic/load - Загружает начальные данные (около 20 Product и 50 SKU).
   - GET: localhost:8080/elastic/search?name=table&country=Namibia - осуществляет поиск по параметрам name и country для объекта Product.
# Дополнительно    
{
    "name": "table",
    "skus": [
      {
        "code": 8507,
        "color": "green",
        "price": 41.48
      },
      {
        "code": 8507,
        "color": "green",
        "price": 15.56
      }
    ],
    "active": false,
    "countryOfProduction": "Canada"
}
## Детальное описание приложения
  - Приложение разворачивается с помощью docker используя образы postgre и elasticsearch. В нем присутствуют сущности Product(id,name,countryOfProduction,active,skus) и Sku(id,code,color,price,product). Для передачи и хранения в elastic search используются соответствующие объекты ProductDTO и SkuDTO. 
  - Для генерации данных используется ресурс https://app.json-generator.com . Приложение обращается к ресурсу по заранее заготовленному URL и сгенерированному токену(для того, чтобы ускорить проверку token и url не спрятаны).
